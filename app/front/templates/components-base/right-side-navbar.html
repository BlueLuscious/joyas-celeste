{% load static %}
{% load filters.product_filter %}

<div id="right_side_navbar" class="fixed z-20 right-0 bottom-0 flex flex-col items-center 
    gap-y-10 h-full w-full sm:w-2/4 lg:w-1/4 p-2 bg-white
    transform translate-x-full transition-transform duration-300 ease-in-out">

    <div id="close_cart" class="flex items-center pr-5 ml-auto h-20">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" 
            stroke-width="1.5" stroke="currentColor" class="w-8 h-8 text-primary-earth_tone_4 cursor-pointer">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
        </svg>          
    </div>

    <div>
        <div id="cart_items">

            {% if request.session.cart %}
            {% for item_id, item_details in request.session.cart.items %}
            <div id="item_{{ item_id }}" class="relative flex flex-col w-full">
                <div class="flex flex-row w-full">
                    <div class="w-2/5">
                        <img class="w-full" src="{{ item_details.image }}" alt="image">
                    </div>
                    <div class="flex flex-col items-center justify-center w-3/5">
                        <div>{{ item_details.name }}</div>
                        <div>$ {{ item_details.price|format_number_AR }}</div>
                        <div id="size_{{ item_id }}">Talle: {{ item_details.size }}</div>
                    </div>
                </div>
                <div class="flex flex-row items-center justify-around">
                    <div>
                        <button id="subtract_quantity_{{ item_id }}" data-id="{{ item_id }}">
                            -
                        </button>
                    </div>
                    <div id="quantity_{{ item_id }}">{{ item_details.quantity }}</div>
                    <div>
                        <button id="add_quantity_{{ item_id }}" data-id="{{ item_id }}">
                            +
                        </button>
                    </div>
                </div>
                <button id="remove_{{ item_id }}" class="absolute top-0 right-0" data-id="{{ item_id }}">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
                    </svg>  
                </button>
            </div>
            {% endfor %}
            {% endif %}

        </div>
    </div>
</div>

<script type="module" src="{% static 'js//cart.js' %}"></script>
