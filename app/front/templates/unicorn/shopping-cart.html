{% load static %}
{% load unicorn %}
{% load filters.product_filter %}

<div>
    {% if not cart_items %}
    <div id="empty_shopping_cart" class="absolute flex justify-center w-full top-1/2">
        <div class="text-lg mukta-light">
            Tu carrito está vacío
        </div>
    </div>
    {% endif %}

    <div class="flex flex-row items-center justify-between w-full h-20 border-b-2 border-secondary-gray_tone_1">
        <div class="ml-5 text-xl cinzel-semibold">
            Carrito
        </div>
        <div id="close_cart" class="flex items-center mr-5 ml-auto">
            {% include "../icons/x-mark.html" with tailwind_class="w-8 h-8 text-primary-earth_tone_4 transition-transform duration-300 ease-in-out cursor-pointer hover:-rotate-90" %}
        </div>
    </div>

    <div id="cart_items" class="flex flex-col gap-y-4 px-2 py-4">
        {% if cart_items %}
        {% for item in cart_items %}
        <div class="relative flex flex-col w-full border 
            border-primary-earth_tone_3_light rounded-sm shadow-md">
            <div class="flex flex-row w-full">
                <div class="w-2/5">
                    <img class="w-full rounded-tl-sm" src="{{ item.product.image.url }}" alt="image">
                </div>
                <div class="flex flex-col items-center justify-center gap-y-2 w-3/5">
                    <div>{{ item.product.name }}</div>
                    <div class="font-semibold">$ {{ item.price|convert_price_to_ARS:dollar_blue|format_number_AR }}</div>
                    <div>Talle {{ item.size }}</div>
                </div>
            </div>
            <div class="flex flex-row items-center justify-around p-2.5 bg-primary-earth_tone_3_light">
                <button unicorn:click="decrement_quantity('{{ item.product.uuid }}', '{{ item.key }}')"
                    class="p-2 px-3 text-white bg-primary-earth_tone_4 rounded-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" 
                        stroke-width="1.75" stroke="currentColor" class="size-4">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14" />
                    </svg>
                </button>
                <div class="w-1/4 p-0.5 text-center text-primary-earth_tone_4 bg-white border-2
                    border-primary-earth_tone_4 rounded-md">
                    {{ item.quantity }}
                </div>
                <button unicorn:click="increment_quantity('{{ item.product.uuid }}', '{{ item.key }}')"
                    class="p-2 px-3 text-white bg-primary-earth_tone_4 rounded-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" 
                        stroke-width="1.75" stroke="currentColor" class="size-4">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                    </svg>                              
                </button>
            </div>
            <button type="button" class="absolute top-1 right-1"
                onclick="removeFromCart('{{ item.key }}')">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" 
                    stroke-width="1.5" stroke="currentColor" class="size-6 text-red-700">
                    <path stroke-linecap="round" stroke-linejoin="round" 
                        d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
                </svg>  
            </button>
        </div>
        {% endfor %}
        {% endif %}
    </div>
</div>
